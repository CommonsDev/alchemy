<!DOCTYPE html>
<html ng-app="alchemy">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Alchemy</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <base href="/">

    <!-- css -->
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles/css/screen.css">
    <link rel="stylesheet" href="styles/css/jquery.oembed.css">

    <!-- vendor includes -->        
    <!--[if lt IE 9]>
        <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    <!-- jquery and plugins -->
    <script src="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="scripts/vendor/moment.min.js"></script>
    <script src="scripts/vendor/jquery.oembed.js"></script>
    <script src="scripts/vendor/strophe.js"></script>
    <script src="scripts/vendor/strophe.muc.js"></script>
    <script src="scripts/vendor/strophe.vcard.js"></script>

    <!-- bootstrap -->
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <!-- angular -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.1.5/angular.min.js"></script>
    <script src="scripts/vendor/angular-cookies.js"></script>
    <script src="scripts/vendor/angular-localStorageModule.js"></script>
    <script src="scripts/vendor/angular-resource-tastypie.js"></script>
    <script src="scripts/vendor/http-auth-interceptor.js"></script>
    <script src="scripts/vendor/angular-imageupload.js"></script>


    <!-- Map module -->
    <script src="scripts/lib/alchemy/services.js"></script>
    <script src="scripts/lib/alchemy/controllers.js"></script>
    <script src="scripts/lib/alchemy/directives.js"></script>
    
    <!-- main app -->
    <script src="scripts/app.js"></script>

  </head>
  <body>
    <div id="page" class="container-fluid fill" ng-controller="ChatRoomController">
      <div class="row-fluid">
	
	<div class="span8">
	  <div ng-show="status == 0">
	    <form name="loginForm" ng-submit="connect()" >
	      <h2>Please login using your Jabber or Gtalk ID</h2>
    	      <input type="text" ng-model="form.username" name="username" required/>
    	      <input type="password" ng-model="form.password" required>
    	      <button class="btn">Connect</button>
	    </form>
	  </div>

	  <div ng-show="status == 1" class="progress progress-striped active">
	    <div class="bar" style="width: 50%;"></div>
	  </div>

	  <div ng-show="status >= 5"> <!-- connected -->

	    <!-- message listing -->
	    <div id="message-box" class="row-fluid">
	      <div class="span12">
		<dl class="dl-horizontal message-list">
		  <div ng-repeat="msg in messages">
		    <dt ng-hide="{{ msg.from == nickname }}">{{ msg.from }}</dt>
		    <dt class="mine" ng-show="{{ msg.from == nickname }}">{{ msg.from }}</dt>
		    <dd>
		      <span muc-messages>{{ msg.text }}</span>
		    </dd>
		  </div>
		</dl>
	      </div>
	    </div>

	    
	    <!-- send message -->
	    <div class="row-fluid">
		<form name="chatForm" ng-submit="sendMessage()">
		  <div class="input-append offset2 span10">
		    <input class="span11" type="text" name="message" ng-model="form.message" placeholder="Type your message..." required/>
		    <button class="btn">Send</button>
		  </div>
		</form>
	    </div>

	  </div>

	</div> <!-- left part -->

	<div id="sidebar" class="span4 well">
	  <h3 ng-show="room.name">{{ room.name }}</h3>
	  <h3 ng-hide="room.name">Not Connected.</h3>

	  <p class="lead" ng-show="room_topic">{{ room_topic }}</p>
	  <p class="lead" ng-hide="room_topic">Please connect using the form.</p>
	  
	  <div ng-show="room">
	    <h3>Who's here?</h3>
	    <ul class="unstyled">
	      <li ng-repeat="occupant in occupants">
		<div class="media">
		  <a class="pull-left" href="#">
		    <img width="50px" height="50px" class="media-object" ng-show="occupant.vcard.photo_data" ng-src="data:{{occupant.vcard.photo_type}};base64,{{ occupant.vcard.photo_data}}" alt="{{ occupant.occupant.nick }}"/>
		    <img width="50px" height="50px" class="media-object" ng-hide="occupant.vcard.photo_data" ng-src="https://do50qumledbw5.cloudfront.net/img/avatar.png" alt="{{ occupant.occupant.nick }}"/>
		  </a>
		  <div class="media-body">
		    <h4 class="media-heading">{{ occupant.occupant.nick }}</h4>
		  </div>
		</div>
	      </li>
	    </ul>

	    <h3>Files</h3>
	    TBD

	    <div>
	    </div>

	  </div>
	</div>
  </body>
</html>

